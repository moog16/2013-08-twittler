<!DOCTYPE html>
<html>
  <head>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
    <style>
    body {
      background-color: #66ffb6;
    }
    div.tweet {
      height: 50px;
      width: 400px;
      background-color: #3dc0cc;
      border: 1px solid #7b9799;
      margin-left: 30%;
    }
    span.time {
      color: #cc3d90;
      float: right;
      border: solid 1px black;
    }
    </style>
  </head>
  <body>
    <script>

      $(document).ready( function() {
        update();
      });

      function getTime() {
        var time = new Date();
        var hours = time.getHours(),
        minutes = time.getMinutes(),
        seconds = time.getSeconds(),
        month = time.getMonth() + 1,
        day = time.getDate(),
        year = time.getFullYear();
        var meridiem;

        if(minutes < 10) {
          minutes = "0" + minutes;
        };

        if(hours > 11) {
          meridiem = "PM"; 
        }
        else {
          meridiem = "AM";
        };

        var monthDate = month + "/" + day + "/" + year;
        var timeDate = hours + ":" + minutes + ":" + seconds + " " + meridiem;

        return  timeDate + " " + monthDate;
      };

      function update() {
        var $body = $('body');
        $body.html('');

        var index = streams.home.length - 1;
        console.log(index);
        while(index >= 0){
          var tweet = streams.home[index];
          var $tweet = $('<div class="tweet"></div>');
          $tweet.text('@' + tweet.user + ': ' + tweet.message);

          var $dateTime = $('<span class="time"></span>');
          var timeText = getTime();
          $dateTime.text(timeText);
          $dateTime.appendTo($tweet);

          $tweet.appendTo($body);
          index -= 1;
        };
      };

      setInterval(update, 3000);



    </script>
  </body>
</html>
